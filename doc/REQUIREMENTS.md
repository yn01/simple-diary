# シンプル日記アプリ 要件定義書

## 1. ドキュメント情報
- **ドキュメント名**: シンプル日記アプリ 要件定義書
- **バージョン**: 1.1.0
- **作成者**: Gemini CLI
- **作成日**: 2026-01-31
- **最終更新日**: 2026-01-31

## 2. プロジェクト概要

### 2.1. プロジェクト名
Simple Diary

### 2.2. 概要
ローカル環境で動作するシンプルなWebベースの日記アプリケーションです。ユーザーは日付とプレーンテキストの本文で構成される日記エントリーを作成、閲覧、編集、削除、検索することができます。

### 2.3. 対象ユーザー
シングルユーザー（1人のみ）

### 2.4. 作成日
2026-01-31

## 3. 技術スタック

### 3.1. フロントエンド
- **フレームワーク**: React 18+ with Vite
- **言語**: TypeScript

### 3.2. バックエンド
- **言語/ランタイム**: Node.js
- **フレームワーク**: Express
- **言語**: TypeScript

### 3.3. データベース
- **種類**: SQLite

### 3.4. デプロイ環境
- ローカル環境のみ

## 4. 機能要件

### 4.1. MVP機能 (高優先度)

#### FR-001: 日記エントリーの作成
- **要件ID**: FR-001
- **要件概要**: ユーザーは新しい日記エントリーを作成できる
- **優先度**: 高
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: ユーザーは日付と本文（プレーンテキスト）を入力して、新しい日記エントリーを保存できる。日付は自動で今日の日付が入力されるが、変更可能である。
- **受け入れ基準**:
    - 日付入力フィールドと本文入力エリアが存在すること
    - 必須フィールドがすべて入力された状態で、新しい日記エントリーが正常に保存されること
    - 保存後、作成したエントリーがリストに表示されること

#### FR-002: 日記エントリーの閲覧
- **要件ID**: FR-002
- **要件概要**: ユーザーは既存の日記エントリーを時系列で閲覧できる
- **優先度**: 高
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 保存された日記エントリーは、最新の日付のものが上位に来る時系列順でリスト表示される。各エントリーは日付と本文のプレビューが表示される。
- **受け入れ基準**:
    - すべての日記エントリーが時系列（降順）でリスト表示されること
    - 各リストアイテムに日付と本文の冒頭部分が表示されること
    - リストから特定のエントリーを選択（クリックなど）すると、そのエントリーの詳細が表示されること

#### FR-003: 日記エントリーの編集
- **要件ID**: FR-003
- **要件概要**: ユーザーは既存の日記エントリーを編集できる
- **優先度**: 高
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: ユーザーは特定の日記エントリーを選択し、その内容（日付、本文）を編集して保存できる。
- **受け入れ基準**:
    - エントリー詳細画面またはリストから編集機能にアクセスできること
    - 日付と本文を編集し、保存ボタンをクリックすると変更が適用されること
    - 編集後、更新されたエントリーが正しく表示されること

#### FR-004: 日記エントリーの削除
- **要件ID**: FR-004
- **要件概要**: ユーザーは既存の日記エントリーを削除できる
- **優先度**: 高
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: ユーザーは特定の日記エントリーを選択し、削除できる。削除前には確認メッセージを表示する。
- **受け入れ基準**:
    - エントリー詳細画面またはリストから削除機能にアクセスできること
    - 削除確認メッセージが表示され、ユーザーが同意するとエントリーが削除されること
    - 削除されたエントリーがリストから消えること

#### FR-005: 日記の検索
- **要件ID**: FR-005
- **要件概要**: ユーザーはキーワードで日記の本文を簡易検索できる
- **優先度**: 高
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: ユーザーは検索バーにキーワードを入力し、日記エントリーの本文にそのキーワードが含まれるものを**LIKE検索（部分一致）**で検索できる。検索結果は時系列で表示される。
- **受け入れ基準**:
    - 検索バーがUI上に存在すること
    - キーワードを入力して検索を実行すると、本文にそのキーワードを含むエントリーのみがリスト表示されること
    - 検索結果が時系列順に表示されること

### 4.2. 将来追加予定の機能 (低優先度)

#### FR-101: タイトルフィールド
- **要件ID**: FR-101
- **要件概要**: 日記エントリーにタイトルフィールドを追加する
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 日記エントリーごとに、本文とは別にタイトルを設定できるようにする。
- **受け入れ基準**:
    - 日記作成・編集時にタイトル入力フィールドが表示されること
    - タイトルが保存・表示されること

#### FR-102: タグ機能
- **要件ID**: FR-102
- **要件概要**: 日記エントリーにタグを付与できるようにする
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 各日記エントリーに対して複数のタグを付与し、タグによるフィルタリングや検索を可能にする。
- **受け入れ基準**:
    - 日記作成・編集時にタグ入力・選択UIが表示されること
    - 付与されたタグでエントリーをフィルタリングできること

#### FR-103: カレンダービュー
- **要件ID**: FR-103
- **要件概要**: カレンダー形式で日記エントリーを閲覧できるようにする
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 月間カレンダーが表示され、日記が書かれた日付がハイライトされる。ハイライトされた日付をクリックすると、その日のエントリーが表示される。
- **受け入れ基準**:
    - 月間カレンダーUIが存在すること
    - 日記が書かれた日付が視覚的に識別できること
    - カレンダー上の日付クリックで、その日のエントリーが表示されること

#### FR-104: マークダウン対応
- **要件ID**: FR-104
- **要件概要**: 日記本文をマークダウン形式で記述・表示できるようにする
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 日記本文の入力エリアがマークダウンに対応し、表示時にHTMLに変換してレンダリングする。
- **受け入れ基準**:
    - 日記本文入力エリアがマークダウン記法を受け付けること
    - 保存・表示時にマークダウンが正しくレンダリングされること

#### FR-105: エクスポート機能
- **要件ID**: FR-105
- **要件概要**: 日記データを外部ファイル形式でエクスポートできるようにする
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: 全て、または指定期間の日記エントリーをCSV、JSON、またはプレーンテキスト形式でエクスポートできるようにする。
- **受け入れ基準**:
    - エクスポート機能へのアクセスポイントが存在すること
    - 選択した形式と範囲でデータが正常にエクスポートされること

#### FR-106: ダークモード
- **要件ID**: FR-106
- **要件概要**: アプリケーションにダークモードを追加する
- **優先度**: 低
- **対応状況**: 未着手
- **起票日**: 2026-01-31
- **詳細説明**: ユーザーがアプリケーションの表示テーマをライトモードとダークモードで切り替えられるようにする。
- **受け入れ基準**:
    - テーマ切り替えUIが存在すること
    - ダークモードに切り替えると、適切に配色が変更されること

## 5. 非機能要件

### 5.1. パフォーマンス
- **概要**: アプリケーションは、エントリーの作成、閲覧、編集、削除、検索において迅速に応答すること。特に、エントリー数が増加してもパフォーマンスが著しく低下しないこと。
- **目標**: 各操作の応答時間は1秒以内を目指す。

### 5.2. セキュリティ
- **概要**: ローカル環境での動作が前提であり、MVPの範囲では**最小限のセキュリティ対策**を講じる。
- **目標**: **SQLインジェクションとクロスサイトスクリプティング (XSS) に対する基本的な対策を実装する。データベースファイルへの直接的なアクセス制限はMVPの範囲外とし、考慮しない。**

### 5.3. UI/UX
- **概要**: シンプルでミニマルなデザインを重視し、直感的で使いやすいインターフェースを提供すること。シングルユーザー向けの快適な操作性。
- **目標**: 主要機能へ容易にアクセスでき、ユーザーが迷わずに操作できるデザインを実装すること。

### 5.4. レスポンシブ対応
- **概要**: アプリケーションは、デスクトップ、タブレット、スマートフォンの各デバイスで最適な表示と操作性を提供すること。
- **目標**: 主要な画面要素が各デバイスの画面サイズに合わせて適切に調整され、レイアウト崩れなく利用できること。タッチ操作やマウス操作に対応したUIを提供すること。

### 5.5. 入力バリデーション
- **概要**: ユーザー入力の整合性と品質を保つため、基本的なバリデーションを実施する。
- **目標**:
    - 必須フィールドが空でないこと（必須チェック）
    - 文字列フィールドが空文字でないこと
    - 日付形式が 'YYYY-MM-DD' であること
    - これらの制約に違反する入力は拒否され、ユーザーに適切なフィードバックが提供されること。

### 5.6. 保守性
- **概要**: コードは読みやすく、変更しやすい構造とすること。将来的な機能追加や技術スタックのアップデートに対応しやすい設計。
- **目標**: クリーンアーキテクチャやモジュール分割を意識し、テスト容易性の高いコードベースとすること。

## 6. データモデル

### Entryテーブル
| フィールド名    | データ型   | 制約                  | 説明                        |
| :-------------- | :--------- | :-------------------- | :-------------------------- |
| `id`            | INTEGER    | PRIMARY KEY, AUTOINCREMENT | 日記エントリーの一意なID   |
| `date`          | TEXT       | NOT NULL              | 日記の日付 (YYYY-MM-DD形式)。**1日に複数件のエントリーが可能であるため、一意制約は設けない。** |
| `content`       | TEXT       | NOT NULL              | 日記の本文 (プレーンテキスト) |
| `created_at`    | TEXT       | NOT NULL              | レコード作成日時 (ISO 8601) |
| `updated_at`    | TEXT       | NOT NULL              | レコード最終更新日時 (ISO 8601) |

## 7. 開発スケジュール
- (準備中)

## 8. リスクと課題
- (準備中)

## 9. 承認欄
- **承認者**: (氏名/役職)
- **承認日**: (日付)

## 10. 変更履歴
| バージョン | 日付       | 変更内容     |
| :--------- | :--------- | :----------- |
| 1.0.0      | 2026-01-31 | 初版作成     |
| 1.1.0      | 2026-01-31 | Codexレビュー指摘事項を反映。日付の一意性（1日複数件可能）、検索方式（LIKE検索）、セキュリティ対策、レスポンシブ対応、入力バリデーション要件を明確化 |

## 11. 付録
- (なし)
