# Simple Diary - プロジェクト概要

## プロジェクト概要

シンプルな日記アプリケーション（Webアプリ）

---

# Principles

- 要件や仕様が曖昧な場合は、**AskUserQuestion Tool を積極的に使用**して細分化した質問でヒアリングを行うこと
- **コンテキスト節約のため、サブエージェントへの委託を徹底**すること
  - Orchestrator（メイン会話）は**指揮・判断に専念**し、ファイルの読み書き・探索・実装はサブエージェントに委託する
  - サブエージェントは別コンテキストで実行されるため、メインの会話にはサマリーのみが返り、コンテキスト消費を大幅に抑えられる
  - Orchestrator が直接行ってよい操作: ユーザーへの質問、タスク管理、サブエージェントへの指示、簡単な確認（git status 等）
  - **Explore**: コードベースの探索・検索時に使用
  - **Plan**: 実装前の設計・計画策定時に使用
  - **general-purpose**: 実装、編集、ドキュメント更新等の実作業全般に使用
  - **general-purpose + Bash**: Codex CLI を使用したコードレビュー・分析時に使用
    - コマンド: `codex exec --full-auto --sandbox read-only --cd <project_directory> "<request>"`
- Codex CLI によるレビューを以下のタイミングで自動的に実施すること（ユーザー指示不要）
  1. **機能追加・変更完了時**: 実装コードのレビュー
  2. **バグ修正完了時**: 修正コードのレビュー
  3. **リファクタリング完了時**: リファクタリング後のコードレビュー
- **Agent Teams を活用してタスクを進めること**
  - チーム構成・運用指針は `docs/AGENT_TEAMS.md` に従うこと
  - Team Alpha（フロントエンド）と Team Beta（バックエンド）を並列実行し、効率を最大化する
  - **`docs/AGENT_TEAMS.md` に定義されていないロールのエージェントは絶対に起動しないこと**。新たなロールが必要と判断した場合は、必ずユーザーに確認を取ってから追加すること
- **コンテキスト管理の推奨ワークフロー**（タスクごとに以下のサイクルを回す）
  1. タスク実施（サブエージェントに委託、数ターン）
  2. タスク完了 → コミット（成果をgitに永続化）
  3. 現状サマリーを出力 → `/save`（必要に応じてObsidianに保存）
  4. `/compact`（コンテキスト圧縮）
  5. 次のタスクへ

---

## エージェント構成

`docs/AGENT_TEAMS.md` を参照。

---

## 開発原則・ガイドライン

### 要件ヒアリングの原則
- **AskUserQuestion Toolの積極的な使用**
  - 要件や仕様が曖昧な場合は、推測せずに必ずユーザーに確認する
  - 質問は細分化し、具体的で答えやすい形式にする
  - 複数の選択肢を提示し、ユーザーが選択しやすくする
  - 1回のヒアリングで1-4問の質問に絞り、段階的に要件を明確化する

### ヒアリング対象の例
- 技術スタックの選択（フレームワーク、データベース、ホスティングなど）
- 機能の優先順位
- UI/UXの方向性
- 非機能要件（性能、セキュリティ、スケーラビリティ）
- データモデルの詳細
- APIの設計方針

### ヒアリングのタイミング
1. **要件定義フェーズ**: 機能要件、非機能要件の詳細確認
2. **設計フェーズ**: 技術選定、アーキテクチャ方針の確認
3. **実装フェーズ**: 実装の詳細や代替案の選択
4. **テストフェーズ**: テスト方針、カバレッジ目標の確認
5. **デプロイフェーズ**: デプロイ先、環境設定の確認

### ヒアリングの良い例
```
AskUserQuestion:
Q1: "フロントエンドフレームワークはどれを使用しますか？"
選択肢:
- Next.js (推奨): SSR対応、App Router、最新機能
- React + Vite: シンプル、高速、軽量
- Vue.js: 学習コスト低、日本語ドキュメント充実

Q2: "データベースはどれを使用しますか？"
選択肢:
- PostgreSQL (推奨): リレーショナル、Supabase対応
- MongoDB: NoSQL、柔軟なスキーマ
- SQLite: ローカル開発、シンプル
```

### ドキュメント作成の原則
- **Claude Codeの役割**: 情報収集、要件整理、ドキュメント構成の決定
- **Geminiの役割**: 整理された情報をもとに、正式なドキュメントを生成
- **作成フロー**:
  1. Claude Codeが要件ヒアリング・情報整理
  2. Geminiがドキュメント生成（/gemini-docs）
  3. Codexがドキュメントレビュー（/codex-review）
  4. フィードバック反映後、確定

### ドキュメント種別と担当

| ドキュメント | 担当 | タイミング |
|-------------|------|-----------|
| 要件定義書（REQUIREMENTS.md） | Gemini | Phase 1完了時 |
| 設計書（DESIGN.md） | Gemini | Phase 2完了時 |
| README（README.md） | Gemini | Phase 5 |
| API仕様書（API.md） | Gemini | Phase 5 |
| ユーザーマニュアル（USER_MANUAL.md） | Gemini | Phase 5 |
| 開発者ドキュメント（DEVELOPMENT.md） | Gemini | Phase 5 |

---

## 開発フェーズ・進捗・レビュー結果

`docs/PLAN.md` を参照。

---

## 技術スタック・機能要件

`docs/REQUIREMENTS.md` を参照。

---

## Skills使用ガイド

### Codexレビューの実行
```bash
/codex-review
```
各フェーズ完了時にCodexによるレビューを実行

### Geminiドキュメント生成の実行
```bash
/gemini-docs
```
ドキュメント作成が必要な時にGeminiによるドキュメント生成を実行
